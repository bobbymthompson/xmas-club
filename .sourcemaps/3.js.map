{"version":3,"sources":["../../src/pages/scorecard/scorecard.module.ts","../../src/pages/scorecard/scorecard.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ScorecardPage } from './scorecard';\n\n@NgModule({\n  declarations: [\n    ScorecardPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ScorecardPage),\n  ],\n  exports: [\n    ScorecardPage\n  ]\n})\nexport class ScorecardPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/scorecard/scorecard.module.ts","import { ScorecardsProvider } from '../../providers/scorecards-provider';\nimport { Component, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Scorecard, Pick } from \"../../models/scorecard\";\nimport { XmasClubDataProvider } from '../../providers/xmas-club.provider';\nimport * as _ from 'underscore';\nimport * as moment from 'moment';\nimport { Week } from \"../../models/week\";\nimport { FirebaseObjectObservable } from \"angularfire2/database\";\nimport { AuthProvider } from \"../../providers/auth.provider\";\nimport { Observable } from \"rxjs/Rx\";\n\n@IonicPage()\n@Component({\n  selector: 'page-scorecard',\n  templateUrl: 'scorecard.html',\n})\nexport class ScorecardPage {\n  scorecard: Scorecard;\n  _scorecard: Observable<Scorecard>;\n  inEditMode: boolean;\n  dueDate: Date;\n  week: number;\n  tieBreakerScore: number;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private scorecardsProvider: ScorecardsProvider,\n    private dataProvider: XmasClubDataProvider,\n    private authProvider: AuthProvider,\n    private elementRef: ElementRef) {\n\n    this.week = this.navParams.get('week');\n    this._scorecard = this.scorecardsProvider.getScorecard(this.week, this.navParams.get('nickname'));\n    \n    this._scorecard.subscribe(async scorecard => {\n\n      this.scorecard = scorecard;\n    \n      if (scorecard) {\n\n        this.tieBreakerScore = scorecard.tieBreakerScore;\n        this.dueDate = new Date((await this.dataProvider.getWeek(this.week)).dueDate);\n\n        for (let pick of scorecard.picks) {\n\n          (<EditablePick>pick).team1Selected = (pick.selectedPick == 'Team1') ? true : false;\n          (<EditablePick>pick).team2Selected = (pick.selectedPick == 'Team2') ? true : false;\n        }\n      }\n    });\n\n    if (this.navParams.get('enableEditMode')) {\n      this.inEditMode = true;\n    }\n  }\n\n  public isScorecardViewable(): boolean {\n\n    if (this.inEditMode) return true;\n\n    /* Only allow the user to view this scorecard if it is after the due date */\n    if (new Date() >= this.dueDate) {\n      return true;\n    }\n\n    if (this.authProvider.isAdministrator) {\n      return true;\n    }\n\n    return false;\n  }\n\n  public canEditScorecard(): boolean {\n\n    if (this.inEditMode) return false;\n\n    if (!this.scorecard) return false;\n\n    /* Only if the current user is authenticated */\n    if (!this.authProvider.isAuthenticated) return false;\n\n    /* Only if this is the current users scorecard */\n    if (!this.scorecard || this.authProvider.user.nickname != this.scorecard.nickname) return false;\n\n    /* Only if it is before the due date. */\n    //if (!this.dueDate || new Date() >= this.dueDate) return false;\n\n    return true;\n  }\n\n  public updateSelectedPick(pick: EditablePick, selectedTeam: string) {\n\n    console.log('update pick');\n\n    if (selectedTeam == 'Team1') {\n\n      if (pick.team1Selected) {\n        pick.team2Selected = false;\n        pick.selectedPick = 'Team1';\n      } else {\n        pick.team2Selected = true;\n        pick.selectedPick = 'Team2';\n      }\n\n    } else if (selectedTeam == 'Team2') {\n\n      if (pick.team2Selected) {\n        pick.team1Selected = false;\n        pick.selectedPick = 'Team2';\n      } else {\n        pick.team1Selected = true;\n        pick.selectedPick = 'Team1';\n      }\n    }\n  }\n\n  public editScorecard() {\n    this.inEditMode = true;\n  }\n\n  public saveScorecard() {\n\n    this.scorecard.tieBreakerScore = this.tieBreakerScore;\n\n    this.scorecardsProvider.update(this.scorecard);\n\n    this.inEditMode = false;\n  }\n}\n\nexport interface EditablePick extends Pick {\n  team1Selected: boolean;\n  team2Selected: boolean;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/scorecard/scorecard.ts"],"sourceRoot":""}