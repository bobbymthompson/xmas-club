{"version":3,"sources":["../../src/pages/admin/admin.module.ts","../../src/pages/admin/admin.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminPage } from './admin';\n\n@NgModule({\n  declarations: [\n    AdminPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminPage),\n  ],\n  exports: [\n    AdminPage\n  ]\n})\nexport class AdminPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.module.ts","import { currentSlidesPerView } from 'ionic-angular/components/slides/swiper';\nimport { XmasClubDataProvider } from '../../providers/xmas-club.provider';\nimport { ScorecardsProvider } from '../../providers/scorecards-provider';\nimport { Component } from '@angular/core';\nimport { IonicPage, Loading, LoadingController, NavController, NavParams, AlertController } from 'ionic-angular';\nimport * as _ from 'underscore';\nimport { Scorecard } from \"../../models/scorecard\";\nimport { Score } from \"../../models/score\";\nimport { Week } from \"../../models/week\";\n\n@IonicPage()\n@Component({\n  selector: 'page-admin',\n  templateUrl: 'admin.html',\n})\nexport class AdminPage {\n  scorecards: Scorecard[];\n  currentWeek: Week;\n  loading: Loading;\n  weeklyScoresOutput: string;\n\n  constructor(public navCtrl: NavController,\n    private scorecardsProvider: ScorecardsProvider,\n    private dataProvider: XmasClubDataProvider,\n    private loadingCtrl: LoadingController,\n    private alertController: AlertController) {\n\n    this.dataProvider.currentWeek().then((week) => {\n      this.currentWeek = week;\n    });\n  }\n\n  private async loadScorecardsFromEmail() {\n\n    this.showLoading();\n    let currentWeek = await this.dataProvider.currentWeek();\n    this.scorecards = await this.scorecardsProvider.loadScorecardsFromEmail(currentWeek.week);\n\n    this.navCtrl.push('ListPage', {\n      title: 'Loaded scorecards',\n      list: this.scorecards.map(sc => sc.nickname)\n    });\n\n    this.loading.dismiss();\n  }\n\n  private async populateScoresFromScorecards() {\n\n    this.showLoading();\n\n    let weeks = await this.dataProvider.getWeeks();\n\n    let currentWeek = _.find(weeks, (week) => week.week === 3);\n    console.log(`Updating scores for week: ` + currentWeek.week);\n    //let currentWeek = await this.dataProvider.currentWeek();\n\n    let scorecards = await this.dataProvider.getScorecardResults(currentWeek.week);\n\n    scorecards.forEach(scorecard => {\n\n      this.scorecardsProvider.insertWeeklyScore(scorecard);\n    });\n\n    this.loading.dismiss();\n  }\n\n  private async forceUpdateOfScores() {\n    this.dataProvider.forceUpdateOfScores();\n  }\n\n  private async addNewWeek() {\n\n\n    let alert = this.alertController.create({\n      title: 'Confirm',\n      message: 'Are you sure you want to create a new week?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            this.dataProvider.addWeek();\n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n  private async showUnsubmittedPicks() {\n\n    this.showLoading();\n\n    let users = await this.dataProvider.getUnsubmittedUsersForWeek(this.currentWeek.week);\n\n    this.navCtrl.push('ListPage', {\n      title: 'Unsubmitted Players',\n      list: users\n    });\n\n    this.loading.dismiss();\n  }\n\n  private async outputWeeklyScores() {\n\n    let currentWeek = await this.dataProvider.currentWeek();\n\n    let scorecards = await this.dataProvider.getScorecardResults(currentWeek.week);\n\n    scorecards.forEach(scorecard => {\n\n      this.weeklyScoresOutput += scorecard.nickname + '\\t' + scorecard.score + '\\n';\n    });\n\n  }\n\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...',\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.ts"],"sourceRoot":""}