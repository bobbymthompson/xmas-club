{"version":3,"sources":["../../src/pages/admin/admin.module.ts","../../src/pages/admin/admin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,sCAAyC;AACzC,gDAAgD;AAChD,yCAAoC;AAapC,IAAa,eAAe,GAA5B;CAA+B;AAAlB,eAAe;IAX3B,eAAQ,CAAC;QACR,YAAY,EAAE;YACZ,iBAAS;SACV;QACD,OAAO,EAAE;YACP,+BAAe,CAAC,QAAQ,CAAC,iBAAS,CAAC;SACpC;QACD,OAAO,EAAE;YACP,iBAAS;SACV;KACF,CAAC;GACW,eAAe,CAAG;AAAlB,0CAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACd5B,sDAA0E;AAC1E,uDAAyE;AACzE,sCAA0C;AAC1C,gDAAoE;AACpE,mCAAgC;AAShC,IAAa,SAAS,GAAtB;IAGE,YAAmB,OAAsB,EAAU,kBAAsC,EAAU,YAAkC;QAAlH,YAAO,GAAP,OAAO,CAAe;QAAU,uBAAkB,GAAlB,kBAAkB,CAAoB;QAAU,iBAAY,GAAZ,YAAY,CAAsB;IACrI,CAAC;IAEa,uBAAuB;;YAEnC,IAAI,WAAW,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YACxD,IAAI,CAAC,UAAU,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,uBAAuB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC5F,CAAC;KAAA;IAEa,4BAA4B;;YAExC,IAAI,WAAW,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YAExD,IAAI,MAAM,GAAY,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,CAAC;YAEzE,IAAI,OAAO,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAE5E,MAAM,CAAC,OAAO,CAAC,KAAK;gBAElB,IAAI,WAAW,GAAG,CAAC,CAAC;gBAEpB,IAAI,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,IAAI,SAAS,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC;gBAChF,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACd,WAAW,GAAG,SAAS,CAAC,KAAK,CAAC;gBAChC,CAAC;gBAED,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,WAAW,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;YAC/E,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEa,UAAU;;YAEtB,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC9B,CAAC;KAAA;CACF;AArCY,SAAS;IALrB,yBAAS,EAAE;IACX,gBAAS,CAAC;QACT,QAAQ,EAAE,YAAY;OACG;KAC1B,CAAC;cAIqI;GAH1H,SAAS,CAqCrB;AArCY,8BAAS,G","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminPage } from './admin';\n\n@NgModule({\n  declarations: [\n    AdminPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminPage),\n  ],\n  exports: [\n    AdminPage\n  ]\n})\nexport class AdminPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.module.ts","import { currentSlidesPerView } from 'ionic-angular/components/slides/swiper';\nimport { XmasClubDataProvider } from '../../providers/xmas-club.provider';\nimport { ScorecardsProvider } from '../../providers/scorecards-provider';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport * as _ from 'underscore';\nimport { Scorecard } from \"../../models/scorecard\";\nimport { Score } from \"../../models/score\";\n\n@IonicPage()\n@Component({\n  selector: 'page-admin',\n  templateUrl: 'admin.html',\n})\nexport class AdminPage {\n  scorecards: Scorecard[];\n\n  constructor(public navCtrl: NavController, private scorecardsProvider: ScorecardsProvider, private dataProvider: XmasClubDataProvider) {\n  }\n\n  private async loadScorecardsFromEmail() {\n\n    let currentWeek = await this.dataProvider.currentWeek();\n    this.scorecards = await this.scorecardsProvider.loadScorecardsFromEmail(currentWeek.week);\n  }\n\n  private async populateScoresFromScorecards() {\n\n    let currentWeek = await this.dataProvider.currentWeek();\n\n    let scores: Score[] = await this.dataProvider.scores.first().toPromise();\n\n    let results = await this.dataProvider.getScorecardResults(currentWeek.week);\n\n    scores.forEach(score => {\n\n      let weeklyScore = 0;\n\n      let scorecard = _.find(results, scorecard => scorecard.nickname === score.$key);\n      if (scorecard) {\n        weeklyScore = scorecard.score;\n      }\n\n      this.dataProvider.addScoreForUser(score.$key, currentWeek.week, weeklyScore);\n    });\n  }\n\n  private async addNewWeek() {\n\n    this.dataProvider.addWeek();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.ts"],"sourceRoot":""}